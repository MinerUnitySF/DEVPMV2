@isTest
global class AvataxCalloutMock implements WebServiceMock {
    global void doInvoke(Object stub,
           Object request,
           Map<String, Object> response,
           String endpoint,
           String soapAction,
           String requestName,
           String responseNS,
           String responseName,
           String responseType){
               // Create response element from the autogenerated class.
               // Populate response element.
               // Add response element to the response parameter, as follows:
               avataxAvalaraComServicesAlt.GetTaxResponse_element responseElement = 
                   new avataxAvalaraComServicesAlt.GetTaxResponse_element();
               avataxAvalaraComServicesAlt.GetTaxResult result = 
                   new avataxAvalaraComServicesAlt.GetTaxResult();
               result.ResultCode = 'Success';
               result.TaxLines = new avataxAvalaraComServicesAlt.ArrayOfTaxLine();
               result.TaxLines.TaxLine = new List<avataxAvalaraComServicesAlt.TaxLine>();
               avataxAvalaraComServicesAlt.GetTax_element req  = (avataxAvalaraComServicesAlt.GetTax_element)request; 
               Decimal totaltax = 0;
               for(avataxAvalaraComServicesAlt.Line l :req.GetTaxRequest.Lines.Line){
                   avataxAvalaraComServicesAlt.TaxLine tLine = new avataxAvalaraComServicesAlt.TaxLine();
                   tLine.No = l.No;
                   tLine.Tax = 20;
                   tLine.TaxCode = l.TaxCode;
                   result.TaxLines.TaxLine.add(tLine);
                   toTalTax += tLine.Tax;
               }
               result.TotalTax = totaltax;
               responseElement.GetTaxResult = result;
               response.put('response_x', responseElement);
    }
}